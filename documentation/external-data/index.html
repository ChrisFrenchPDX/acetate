<!DOCTYPE html>
<html>
<head>
  
    <title>External Data | Acetate</title>
  

  <link rel="stylesheet" href="/assets/css/main.css">
  <link href='//fonts.googleapis.com/css?family=Unica+One|Karla:400,400italic,700' rel='stylesheet' type='text/css'>
</head>

<body>
  <nav class="navigation ">
    <div class="grid-container">
      <a href="/">Acetate</a>

      <div class="right">
        <a href="/getting-started/">Getting Started</a>
        <a href="/documentation/" class="is-active">Documentation</a>
        <a href="http://github.com/patrickarlt/acetate/">GitHub</a>
      </div>
    </div>
  </nav>

  
<div class="grid-container">
  <aside class="column-6">
    <nav class="topic-list">
      <a href="/getting-started/">Getting Started</a>
      <a href="/understanding-acetate/">Understanding Acetate</a>

      
    </nav>
  </aside>

  <article class="column-18">
    <h1>External Data</h1>
    <p>Acetate can include data from external JSON and YAML files or you can define function to load data. To load data files place <code>.json</code>, <code>.yaml</code> or <code>.yml</code> files in your source folder. Then in your config file you can declare those files as data sources.</p>
<p><code class="filename">acetate.config.js</code></p>
<pre><code class="js">acetate.data(<span class="hljs-string">'projects'</span>, <span class="hljs-string">'projects.json'</span>);
acetate.data(<span class="hljs-string">'people'</span>, <span class="hljs-string">'people.yaml'</span>);
acetate.data(<span class="hljs-string">'status'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-comment">// get data, via api request ect...</span>
  <span class="hljs-comment">// callback with an error if something goes wrong</span>
  callback(error, data);
});
</code></pre>
<h2>Using Data in your Templates</h2>
<p>Once you have defined your data sources you can access them in your pages under the <code>data</code> key.</p>
<pre><code class="html">{{ data.projects }}
{{ data.people }}
{{ data.status }}
</code></pre>
<h2>Data Types</h2>
<p>Acetate supports JSON and YAML. The rest of these examples will use define data sources locally on the page for clarity.</p>
<h3>JSON</h3>
<p><code class="filename">acetate.config.js</code></p>
<pre><code class="js">acetate.data(<span class="hljs-string">'company'</span>, <span class="hljs-string">'company.json'</span>);
</code></pre>
<p><code class="filename">src/company.json</code></p>
<pre><code class="json">{
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"ACME Widgets"</span>,
    <span class="hljs-attr">"employees"</span>: [{
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Bob"</span>,
        <span class="hljs-attr">"age"</span>: <span class="hljs-number">32</span>
    },{
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Alice"</span>,
        <span class="hljs-attr">"age"</span>: <span class="hljs-number">28</span>
    }]
}
</code></pre>
<p><code class="filename">src/company.html</code></p>
<pre><code class="html">---
title: Employee Directory
---


<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{data.company.name}} - {{title}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
{% for employee in data.company.employees %}
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{employee}} ({{age}})<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
{% endfor %}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<h3>YAML</h3>
<p><code class="filename">acetate.config.js</code></p>
<pre><code class="js">acetate.data(<span class="hljs-string">'company'</span>, <span class="hljs-string">'company.yaml'</span>);
</code></pre>
<p><code class="filename">src/company.yaml</code></p>
<pre><code><span class="hljs-attribute">name</span>: ACME Widgets
<span class="hljs-attribute">employees</span>:
    - <span class="hljs-attribute">name</span>: Bob
      <span class="hljs-attribute">age</span>: <span class="hljs-number">32</span>
    - <span class="hljs-attribute">name</span>: Alice
      <span class="hljs-attribute">age</span>: <span class="hljs-number">28</span>
</code></pre>
<p><code class="filename">src/company.html</code></p>
<pre><code class="html">---
title: Employee Directory
---


<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{data.company.name}} {{title}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
{% for employee in data.company.employees %}
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{employee}} ({{age}})<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
{% endfor %}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<h3>Dynamic Data</h3>
<p>You can also use function that query data dynamically at build time. This is great for things that need to come from external sources like an API or a database but don't need to be always up to date.</p>
<p><code class="filename">acetate.config.js</code></p>
<pre><code class="js"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">acetate</span>) </span>{
  acetate.data(<span class="hljs-string">'gists'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>)</span>{
    request({
      method: <span class="hljs-string">'GET'</span>,
      url: <span class="hljs-string">'https://api.github.com/users/patrickarlt/gists'</span>,
      json: <span class="hljs-literal">true</span>,
      headers: {
        <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'request'</span>
      }
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, resp, body</span>)</span>{
      callback(err, body);
    });
  }
}
</code></pre>
<p><code class="filename">src/gists.html</code></p>
<pre><code class="html">---
title: My Gists
---


<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
{% for gist in data.gists %}
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{gist.html_url"</span>&gt;</span>{{gist.description}}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
{% endfor %}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
    <hr>
    <p class="small">
      <a href="https://github.com/patrickarlt/acetate-site/edit/master/src/documentation/external-data.md">Edit this Page on GitHub</a>
    </p>
  </article>
</div>

</body>
</html>